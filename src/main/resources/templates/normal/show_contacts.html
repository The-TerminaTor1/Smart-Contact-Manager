<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="base2::layout(~{::section})">

<head>
    <meta charset="UTF-8">
    <title>All Contacts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            font-family: 'Segoe UI', sans-serif;
            color: #ffffff;
        }

        .contacts-glass-box {
            background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            padding: 2rem;
            max-width: 1100px;
            margin: 5rem auto;
        }

        .contacts-glass-box h1 {
            text-align: center;
            color: #ffffffdd;
            font-weight: 600;
            margin-bottom: 2rem;
        }

        .table thead {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .table th,
        .table td {
            color: #ffffffdd;
            vertical-align: middle;
        }

        .table tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.15);
        }
    </style>
</head>

<body>

    <section>
        <div class="contacts-glass-box text-white">

            <h1>Your Contacts</h1>

            <!-- âœ… SESSION MESSAGE ALERT -->
            <div th:if="${session.message}" class="alert alert-dismissible fade show mt-3"
                th:classappend="' alert-' + ${session.message.type}" role="alert">
                <span th:text="${session.message.content}">Message</span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            <div class="table-responsive text-white">
                <table class="table table-borderless text-white">
                    <thead>
                        <tr>
                            <th scope="col">#ID</th>
                            <th scope="col">First Name</th>
                            <th scope="col">Last Name</th>
                            <th scope="col">Email</th>
                            <th scope="col">Work</th>
                            <th scope="col">Phone</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="c : ${contacts}">
                            <th scope="row">
                                <a href="#" th:href="@{'/user/contacts/' + ${c.cid}}">
                                    <span th:text="${'Con' + c.cid}"></span>
                                </a>
                            </th>
                            <td>
                                <img th:src="@{'/img/' + ${c.cimage}}" class="rounded-circle my_pfp" />
                                <span th:text="${c.name}"></span>
                            </td>
                            <td th:text="${c.secondName}">Doe</td>
                            <td>
                                <a href="#" th:href="@{'/user/contacts/' + ${c.cid}}">
                                    <span th:text="${c.email}"></span>
                                </a>
                            </td>
                            <td th:text="${c.work}">Engineer</td>
                            <td th:text="${c.phone}">9876543210</td>
                            <td>
                                <!--  th:href="@{'/user/delete-contact/' +  ${c.cid}}" -->
                                <a href="#" th:onclick="|deleteContact(${c.cid})|"
                                    class="btn btn-danger btn-sm">Delete</a>

                                <form th:action="@{'/user/update-contact/' + ${c.cid}}" method="post" class="d-inline">
                                    <button type="submit" class="btn btn-primary btn-sm">Update</button>

                                </form>

                            </td>
                        </tr>
                    </tbody>
                </table>

                <nav aria-label="Page navigation example">
                    <ul class="pagination">
                        <li class="page-item">
                            <a th:if="${currentPage != 0}" class="page-link" href="#" aria-label="Previous"
                                th:href="@{'/user/show-contacts/'+${currentPage-1}}">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li th:classappend="${currentPage == i-1?'active':''}" class="page-item"
                            th:each="i : ${#numbers.sequence(1,totalPages) }">
                            <a class="page-link" href="#" th:href="@{'/user/show-contacts/'+${i-1}}">
                                <span th:text="${i}"></span>
                            </a>
                        </li>
                        <li class="page-item">
                            <a th:if="${currentPage+1 != totalPages}" class="page-link" href="#" aria-label="Next"
                                th:href="@{'/user/show-contacts/'+${currentPage+1}}">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </section>

    <!-- Optional Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>